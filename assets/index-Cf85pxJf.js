(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();function p(e,t){document.querySelector("#app").innerHTML=e,document.title=t}function h(){const e=[56.326797,44.005986],t=new ymaps.Map("map",{center:e,zoom:10}),n=new ymaps.Placemark(e,{hintContent:"Нижний Новгород",balloonContent:"Город на Волге"});t.geoObjects.add(n)}function y(e){if(e==="/map"){const t=document.querySelector("#map");t&&(t.classList.add("lds-circle"),ymaps.ready(()=>{h(),t.classList.remove("lds-circle")}))}}function g(e){document.querySelectorAll(".nav-link").forEach(t=>{t.classList.remove("active")}),e.classList.add("active")}function v(e){sessionStorage.setItem("activeLink",e.href)}function L(){var t;const e=sessionStorage.getItem("activeLink");e?document.querySelectorAll(".nav-link").forEach(n=>{const s=n;s.href===e&&s.classList.add("active")}):(t=document.querySelector("#main-page"))==null||t.classList.add("active")}function S(e){g(e),v(e)}const r={paths:{404:"/public/404.html","/":"/public/profile.html","/map":"/public/map.html","/time":"/public/timer.html"},titles:{404:"Page not found","/":"Profile","/map":"Map","/time":"Time"}},u=async()=>{const e=window.location.pathname,t=r.paths[e]||r.paths[404],n=r.titles[e]||r.titles[404],s=await fetch(t).then(o=>o.text());p(s,n),y(e),L()},m=e=>{e.preventDefault();const t=e.target;window.history.pushState({},"",t.href),S(t),u()};document.querySelectorAll(".nav-link").forEach(e=>{e.addEventListener("click",m)});const w=window;window.onpopstate=u;w.route=m;u();const c={milliseconds:1e3*60*60,seconds:1e3*60};let d;window.addEventListener("load",T);function T(){d=Date.now(),q(),requestAnimationFrame(f)}function q(){const e=sessionStorage.getItem("timerValue");e&&(d-=parseInt(e))}function f(){const e=Date.now()-d,t=P(e),n=document.querySelector("#count");n&&(n.textContent=t),b(e),requestAnimationFrame(f)}function P(e){const t=Math.floor(e/c.milliseconds),n=Math.floor(e%c.milliseconds/c.seconds),s=Math.floor(e%c.seconds/1e3);return`${l(t)}:${l(n)}:${l(s)}`}const l=e=>e.toString().padStart(2,"0"),b=e=>{sessionStorage.setItem("timerValue",e.toString())};
